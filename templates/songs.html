{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-12 col-md-9 col-lg-7">
        <div class="d-flex justify-content-between align-items-center p-2">
            <a href="{% url 'go_home' %}" class="btn btn-sm btn-outline-secondary">
              <i class="bi bi-arrow-left"></i> Back
            </a>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="fw-bold mb-0">Songs</h1>
            <span class="text-muted small">{{ songs|length }} total</span>
        </div>

    <form method="get" class="mb-4">
      <div class="row g-2 justify-content-center">
        <div class="col-12 col-md-8 col-lg-6">
          <div class="input-group">
              <label>
                  <input
                    type="text"
                    name="q"
                    value="{{ q }}"
                    class="form-control"
                    placeholder="Search by song name or artist..."
                  >
              </label>
              <button class="btn btn-primary" type="submit">Search</button>
            {% if q %}
              <a class="btn btn-outline-secondary" href="{% url 'show_songs' %}">Clear</a>
            {% endif %}
          </div>
        </div>
      </div>
    </form>


    <!-- Display de cards -->
      <div class="row g-4 justify-content-center">

          {% for s in songs %}
            <div class="col-12 col-md-6 col-lg-4">

            <!-- Card -->
                <a href="{% url 'view_song' s.code %}">

              <div class="card shadow-sm border-0 rounded-4 h-100" href="{% url 'view_song' s.code %}">

                <div class="row g-0 align-items-center h-100">

                  <div class="col-auto p-3">

                    <img
                      src="{{ s.artwork }}"
                      alt="Cover - {{ s.name }}"
                      class="rounded-3"
                      style="width: 72px; height: 72px; object-fit: cover;">

                  </div>

                  <div class="col">
                    <div class="card-body py-3 pe-3">

                      <h5 class="card-title mb-1 fw-semibold">{{ s.name }}</h5>

                      <div class="text-muted mb-1">{{ s.artist }}</div>

                      <div class="small text-secondary">{{ s.releaseDate }}
                      </div>

                    </div>

                  </div>

                </div>

              </div>
            </a>
            </div>

          {% empty %}

            <div class="col-12">

              <div class="alert alert-warning border-0 rounded-4 shadow-sm text-center">
                No songs found.
              </div>

            </div>

          {% endfor %}

        </div>


    </div>

  </div>

</div>

{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/songs.css' %}">
{% endblock %}

